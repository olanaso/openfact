###############################################################################
# Copyright 2016 Sistcoop, Inc. and/or its affiliates
# and other contributors as indicated by the @author tags.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
###############################################################################
# IMPORTANT: If you change this file you should also make equivalent changes
# to src/main/resources/cli/default-openfact-subsys-config.cli
# The CLI file is packaged with the subsystem and extracted by the overlay distribution.
openfact.server.subsys.default.config=\
<subsystem xmlns="urn:jboss:domain:openfact-server:1.1">\
   <web-context>openfact</web-context>\
    <providers>\
        <provider>classpath:${jboss.home.dir}/providers/*</provider>\
    </providers>\
    <master-organization-name>master</master-organization-name>\
    <admin-console-url>http://localhost:4200</admin-console-url>\
    <scheduled-task-interval>900</scheduled-task-interval>\
    <theme>\
        <staticMaxAge>2592000</staticMaxAge>\
        <cacheThemes>true</cacheThemes>\
        <cacheTemplates>true</cacheTemplates>\
        <dir>${jboss.home.dir}/themes</dir>\
    </theme>\
    <spi name="eventsStore">\
        <default-provider>jpa</default-provider>\
        <provider name="jpa" enabled="true">\
            <properties>\
                <property name="exclude-events" value="[]"/>\
            </properties>\
        </provider>\
    </spi>\
    <spi name="organization">\
        <default-provider>jpa</default-provider>\
    </spi>\
    <spi name="invoice">\
        <default-provider>jpa</default-provider>\
    </spi>\
    <spi name="creditNote">\
        <default-provider>jpa</default-provider>\
    </spi>\
    <spi name="debitNote">\
        <default-provider>jpa</default-provider>\
    </spi>\
    <spi name="timer">\
        <default-provider>basic</default-provider>\
    </spi>\
    <spi name="connectionsHttpClient">\
        <provider name="default" enabled="true"/>\
    </spi>\
    <spi name="connectionsJpa">\
        <provider name="default" enabled="true">\
            <properties>\
                <property name="dataSource" value="java:jboss/datasources/OpenfactDS"/>\
                <property name="initializeEmpty" value="true"/>\
                <property name="migrationStrategy" value="update"/>\
                <property name="migrationExport" value="${jboss.home.dir}/openfact-database-update.sql"/>\
            </properties>\
        </provider>\
    </spi>\
    <spi name="jta-lookup">\
        <default-provider>${openfact.jta.lookup.provider:jboss}</default-provider>\
        <provider name="jboss" enabled="true"/>\
    </spi>\
</subsystem>\